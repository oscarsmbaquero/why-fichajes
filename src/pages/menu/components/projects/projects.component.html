<div class="container-fluid my-4">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10">
      <div class="table-responsive">
        <table
          class="table table-bordered table-striped align-middle text-center"
        >
          <thead class="table-light">
            <tr>
              <th>Nombre</th>
              <!-- <th>Ubicación</th> -->
              <th>Descripción</th>
              <th>Horas</th>
              <!-- <th>Ubicación</th> -->
            </tr>
          </thead>
          <tbody>
            @for (user of projects; track user._id) {
            <tr (click)="toggleExpand(user._id)" style="cursor: pointer">
              <td>{{ user.nombre }}
                @if(user.tareas.length > 0){
                  <span class="badge bg-info" style="color: black;">{{ user.tareas.length }} Tareas</span>
                }

              </td>
              <td>{{ user.descripcion }}</td>
              <td>{{ user.horas }}</td>
              <!-- <td>{{ user.hours }}</td> -->
            </tr>
            @if (expandedIndex === user._id) { @for (item of user.tareas; track
            $index) {
            <tr>
              <td colspan="3" style="background-color: white !important">
                <div class="row">
                  <div class="col">
                    <span><b></b> {{ item.nombre }}</span
                    ><br />
                  </div>
                  <div class="col">
                    <span><b></b> {{ item.horas }}h.</span><br />
                  </div>
                </div>
              </td>
            </tr>

            } } }
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<button (click)="visible = true" class="floating-button">
  <img src="../../../../assets/images/agregar.png" width="50px" />
</button>
<p-dialog
  header="Añadir Proyecto"
  [modal]="true"
  [(visible)]="visible"
  [style]="{ width: '30rem' }"
  [contentStyle]="{ padding: '2rem' }"
>
  <form
    [formGroup]="projectForm"
    (ngSubmit)="onSubmit()"
    class="d-flex flex-column align-items-center w-100"
  >
    <!-- <span class="text-secondary text-center mb-4">Introduce los detalles del proyecto.</span> -->

    <div class="mb-3 w-100">
      <input
        type="text"
        class="form-control"
        id="nombre"
        formControlName="nombre"
        placeholder="Nombre del proyecto"
      />
    </div>

    <div class="mb-4 w-100">
      <textarea
        class="form-control"
        id="descripcion"
        formControlName="descripcion"
        rows="3"
        placeholder="Descripción del proyecto"
      ></textarea>
    </div>

    <div class="d-flex justify-content-center gap-2 w-100">
      <button type="button" class="btn btn-secondary" (click)="visible = false">
        Cancelar
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="projectForm.invalid"
      >
        Guardar
      </button>
    </div>
  </form>
</p-dialog>
